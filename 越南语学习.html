<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>越南语背单词</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 10px;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .container {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        h2 {
            color: #3498db;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #ecf0f1;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #3498db;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .question {
            font-size: 1.4rem;
            text-align: center;
            margin: 25px 0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2c3e50;
            font-weight: bold;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
            flex-grow: 1;
        }
        
        .option {
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .option:hover {
            background-color: #e9ecef;
        }
        
        .option.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        
        .option.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        .feedback {
            text-align: center;
            margin: 15px 0;
            font-size: 1.1rem;
            min-height: 30px;
        }
        
        .correct-feedback {
            color: #28a745;
            font-weight: bold;
        }
        
        .incorrect-feedback {
            color: #dc3545;
            font-weight: bold;
        }
        
        .next-btn {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px;
            width: 100%;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .next-btn:hover {
            background-color: #2980b9;
        }
        
        .next-btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .unit-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: auto;
            padding-top: 20px;
        }
        
        .unit-btn {
            flex: 1;
            min-width: 120px;
            background-color: #ecf0f1;
            border: none;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .unit-btn.active {
            background-color: #3498db;
            color: white;
        }
        
        .unit-btn:hover:not(.active) {
            background-color: #d5dbdb;
        }
        
        .result-screen {
            text-align: center;
            padding: 20px 0;
        }
        
        .accuracy {
            font-size: 3rem;
            font-weight: bold;
            color: #3498db;
            margin: 20px 0;
        }
        
        .restart-btn {
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.2s ease;
        }
        
        .restart-btn:hover {
            background-color: #27ae60;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 400px) {
            .question {
                font-size: 1.2rem;
            }
            
            .option {
                font-size: 1rem;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>越南语背单词</h1>
        
        <div class="stats">
            <div class="current">进度: <span id="current-progress">0</span>/<span id="total-words">0</span></div>
            <div class="accuracy">准确率: <span id="accuracy-rate">0%</span></div>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress-bar"></div>
        </div>
        
        <div id="quiz-screen">
            <div class="question" id="question-text"></div>
            
            <div class="options">
                <div class="option" id="option1"></div>
                <div class="option" id="option2"></div>
            </div>
            
            <div class="feedback" id="feedback"></div>
            
            <button class="next-btn" id="next-btn" disabled>下一题</button>
        </div>
        
        <div id="result-screen" class="result-screen hidden">
            <h2>本单元学习完成!</h2>
            <div class="accuracy" id="final-accuracy">0%</div>
            <p>你答对了 <span id="correct-count">0</span> 题，共 <span id="total-count">0</span> 题</p>
            <button class="restart-btn" id="restart-btn">再来一次</button>
        </div>
        
        <div class="unit-selector">
            <button class="unit-btn active" data-unit="1">单元 1 - 基础问候</button>
            <button class="unit-btn" data-unit="2">单元 2 - 数字时间</button>
            <button class="unit-btn" data-unit="3">单元 3 - 食物购物</button>
            <button class="unit-btn" data-unit="4">单元 4 - 交通旅行</button>
        </div>
    </div>

    <script>
        // 词库数据
        const wordData = {
            1: [
                { vietnamese: "xin chào", chinese: "你好", pinyin: "xin chao", type: "phrase" },
                { vietnamese: "cảm ơn", chinese: "谢谢", pinyin: "cam on", type: "word" },
                { vietnamese: "xin lỗi", chinese: "对不起", pinyin: "xin loi", type: "phrase" },
                { vietnamese: "tạm biệt", chinese: "再见", pinyin: "tam biet", type: "word" },
                { vietnamese: "chào buổi sáng", chinese: "早上好", pinyin: "chao buoi sang", type: "phrase" },
                { vietnamese: "chào buổi trưa", chinese: "中午好", pinyin: "chao buoi trua", type: "phrase" },
                { vietnamese: "chào buổi tối", chinese: "晚上好", pinyin: "chao buoi toi", type: "phrase" },
                { vietnamese: "bạn khỏe không?", chinese: "你好吗？", pinyin: "ban khoe khong", type: "phrase" },
                { vietnamese: "tôi khỏe", chinese: "我很好", pinyin: "toi khoe", type: "phrase" },
                { vietnamese: "không sao", chinese: "没关系", pinyin: "khong sao", type: "phrase" },
                { vietnamese: "làm ơn", chinese: "请", pinyin: "lam on", type: "phrase" },
                { vietnamese: "có", chinese: "有/是", pinyin: "co", type: "word" },
                { vietnamese: "không", chinese: "没有/不", pinyin: "khong", type: "word" },
                { vietnamese: "tôi", chinese: "我", pinyin: "toi", type: "word" },
                { vietnamese: "bạn", chinese: "你", pinyin: "ban", type: "word" },
                { vietnamese: "anh ấy", chinese: "他", pinyin: "anh ay", type: "phrase" },
                { vietnamese: "cô ấy", chinese: "她", pinyin: "co ay", type: "phrase" },
                { vietnamese: "chúng tôi", chinese: "我们", pinyin: "chung toi", type: "phrase" },
                { vietnamese: "họ", chinese: "他们", pinyin: "ho", type: "word" },
                { vietnamese: "tên", chinese: "名字", pinyin: "ten", type: "word" },
                { vietnamese: "tuổi", chinese: "年龄", pinyin: "tuoi", type: "word" },
                { vietnamese: "quốc gia", chinese: "国家", pinyin: "quoc gia", type: "word" },
                { vietnamese: "Việt Nam", chinese: "越南", pinyin: "Viet Nam", type: "word" },
                { vietnamese: "Trung Quốc", chinese: "中国", pinyin: "Trung Quoc", type: "word" },
                { vietnamese: "ngôn ngữ", chinese: "语言", pinyin: "ngon ngu", type: "word" },
                { vietnamese: "tiếng Việt", chinese: "越南语", pinyin: "tieng Viet", type: "phrase" },
                { vietnamese: "tiếng Trung", chinese: "中文", pinyin: "tieng Trung", type: "phrase" },
                { vietnamese: "rất vui được gặp bạn", chinese: "很高兴见到你", pinyin: "rat vui duoc gap ban", type: "phrase" },
                { vietnamese: "hẹn gặp lại", chinese: "再见（稍后见）", pinyin: "hen gap lai", type: "phrase" },
                { vietnamese: "chúc ngủ ngon", chinese: "晚安", pinyin: "chuc ngu ngon", type: "phrase" },
                { vietnamese: "chúc mừng", chinese: "祝贺", pinyin: "chuc mung", type: "word" },
                { vietnamese: "sinh nhật", chinese: "生日", pinyin: "sinh nhat", type: "word" },
                { vietnamese: "năm mới", chinese: "新年", pinyin: "nam moi", type: "phrase" },
                { vietnamese: "giáng sinh", chinese: "圣诞节", pinyin: "giang sinh", type: "word" },
                { vietnamese: "vui vẻ", chinese: "快乐", pinyin: "vui ve", type: "word" },
                { vietnamese: "buồn", chinese: "悲伤", pinyin: "buon", type: "word" },
                { vietnamese: "mệt", chinese: "累", pinyin: "met", type: "word" },
                { vietnamese: "đói", chinese: "饿", pinyin: "doi", type: "word" },
                { vietnamese: "khát", chinese: "渴", pinyin: "khat", type: "word" },
                { vietnamese: "nóng", chinese: "热", pinyin: "nong", type: "word" },
                { vietnamese: "lạnh", chinese: "冷", pinyin: "lanh", type: "word" },
                { vietnamese: "đau", chinese: "痛", pinyin: "dau", type: "word" },
                { vietnamese: "bệnh", chinese: "病", pinyin: "benh", type: "word" },
                { vietnamese: "khỏe mạnh", chinese: "健康", pinyin: "khoe manh", type: "word" },
                { vietnamese: "may mắn", chinese: "幸运", pinyin: "may man", type: "word" },
                { vietnamese: "thành công", chinese: "成功", pinyin: "thanh cong", type: "word" },
                { vietnamese: "thất bại", chinese: "失败", pinyin: "that bai", type: "word" },
                { vietnamese: "yêu", chinese: "爱", pinyin: "yeu", type: "word" },
                { vietnamese: "ghét", chinese: "恨", pinyin: "ghet", type: "word" }
            ],
            2: [
                { vietnamese: "một", chinese: "一", pinyin: "mot", type: "word" },
                { vietnamese: "hai", chinese: "二", pinyin: "hai", type: "word" },
                { vietnamese: "ba", chinese: "三", pinyin: "ba", type: "word" },
                { vietnamese: "bốn", chinese: "四", pinyin: "bon", type: "word" },
                { vietnamese: "năm", chinese: "五", pinyin: "nam", type: "word" },
                { vietnamese: "sáu", chinese: "六", pinyin: "sau", type: "word" },
                { vietnamese: "bảy", chinese: "七", pinyin: "bay", type: "word" },
                { vietnamese: "tám", chinese: "八", pinyin: "tam", type: "word" },
                { vietnamese: "chín", chinese: "九", pinyin: "chin", type: "word" },
                { vietnamese: "mười", chinese: "十", pinyin: "muoi", type: "word" },
                { vietnamese: "trăm", chinese: "百", pinyin: "tram", type: "word" },
                { vietnamese: "nghìn", chinese: "千", pinyin: "nghin", type: "word" },
                { vietnamese: "triệu", chinese: "百万", pinyin: "trieu", type: "word" },
                { vietnamese: "tỷ", chinese: "十亿", pinyin: "ty", type: "word" },
                { vietnamese: "số", chinese: "数字", pinyin: "so", type: "word" },
                { vietnamese: "ngày", chinese: "天", pinyin: "ngay", type: "word" },
                { vietnamese: "tháng", chinese: "月", pinyin: "thang", type: "word" },
                { vietnamese: "năm", chinese: "年", pinyin: "nam", type: "word" },
                { vietnamese: "giờ", chinese: "小时", pinyin: "gio", type: "word" },
                { vietnamese: "phút", chinese: "分钟", pinyin: "phut", type: "word" },
                { vietnamese: "giây", chinese: "秒", pinyin: "giay", type: "word" },
                { vietnamese: "thứ hai", chinese: "星期一", pinyin: "thu hai", type: "phrase" },
                { vietnamese: "thứ ba", chinese: "星期二", pinyin: "thu ba", type: "phrase" },
                { vietnamese: "thứ tư", chinese: "星期三", pinyin: "thu tu", type: "phrase" },
                { vietnamese: "thứ năm", chinese: "星期四", pinyin: "thu nam", type: "phrase" },
                { vietnamese: "thứ sáu", chinese: "星期五", pinyin: "thu sau", type: "phrase" },
                { vietnamese: "thứ bảy", chinese: "星期六", pinyin: "thu bay", type: "phrase" },
                { vietnamese: "chủ nhật", chinese: "星期日", pinyin: "chu nhat", type: "phrase" },
                { vietnamese: "hôm nay", chinese: "今天", pinyin: "hom nay", type: "phrase" },
                { vietnamese: "ngày mai", chinese: "明天", pinyin: "ngay mai", type: "phrase" },
                { vietnamese: "hôm qua", chinese: "昨天", pinyin: "hom qua", type: "phrase" },
                { vietnamese: "buổi sáng", chinese: "早上", pinyin: "buoi sang", type: "phrase" },
                { vietnamese: "buổi trưa", chinese: "中午", pinyin: "buoi trua", type: "phrase" },
                { vietnamese: "buổi chiều", chinese: "下午", pinyin: "buoi chieu", type: "phrase" },
                { vietnamese: "buổi tối", chinese: "晚上", pinyin: "buoi toi", type: "phrase" },
                { vietnamese: "bây giờ", chinese: "现在", pinyin: "bay gio", type: "phrase" },
                { vietnamese: "sau", chinese: "之后", pinyin: "sau", type: "word" },
                { vietnamese: "trước", chinese: "之前", pinyin: "truoc", type: "word" },
                { vietnamese: "sớm", chinese: "早", pinyin: "som", type: "word" },
                { vietnamese: "muộn", chinese: "晚", pinyin: "muon", type: "word" },
                { vietnamese: "nhanh", chinese: "快", pinyin: "nhanh", type: "word" },
                { vietnamese: "chậm", chinese: "慢", pinyin: "cham", type: "word" },
                { vietnamese: "đúng giờ", chinese: "准时", pinyin: "dung gio", type: "phrase" },
                { vietnamese: "trễ", chinese: "迟到", pinyin: "tre", type: "word" },
                { vietnamese: "lịch", chinese: "日历", pinyin: "lich", type: "word" },
                { vietnamese: "thời gian", chinese: "时间", pinyin: "thoi gian", type: "phrase" },
                { vietnamese: "kỳ nghỉ", chinese: "假期", pinyin: "ky nghi", type: "phrase" },
                { vietnamese: "sinh nhật", chinese: "生日", pinyin: "sinh nhat", type: "word" },
                { vietnamese: "ngày lễ", chinese: "节日", pinyin: "ngay le", type: "phrase" }
            ],
            3: [
                { vietnamese: "cơm", chinese: "米饭", pinyin: "com", type: "word" },
                { vietnamese: "phở", chinese: "越南米粉", pinyin: "pho", type: "word" },
                { vietnamese: "bánh mì", chinese: "越南法棍", pinyin: "banh mi", type: "word" },
                { vietnamese: "nước", chinese: "水", pinyin: "nuoc", type: "word" },
                { vietnamese: "trà", chinese: "茶", pinyin: "tra", type: "word" },
                { vietnamese: "cà phê", chinese: "咖啡", pinyin: "ca phe", type: "word" },
                { vietnamese: "bia", chinese: "啤酒", pinyin: "bia", type: "word" },
                { vietnamese: "rượu", chinese: "酒", pinyin: "ruou", type: "word" },
                { vietnamese: "thịt", chinese: "肉", pinyin: "thit", type: "word" },
                { vietnamese: "cá", chinese: "鱼", pinyin: "ca", type: "word" },
                { vietnamese: "gà", chinese: "鸡", pinyin: "ga", type: "word" },
                { vietnamese: "bò", chinese: "牛", pinyin: "bo", type: "word" },
                { vietnamese: "heo", chinese: "猪", pinyin: "heo", type: "word" },
                { vietnamese: "rau", chinese: "蔬菜", pinyin: "rau", type: "word" },
                { vietnamese: "hoa quả", chinese: "水果", pinyin: "hoa qua", type: "phrase" },
                { vietnamese: "cam", chinese: "橙子", pinyin: "cam", type: "word" },
                { vietnamese: "chuối", chinese: "香蕉", pinyin: "chuoi", type: "word" },
                { vietnamese: "táo", chinese: "苹果", pinyin: "tao", type: "word" },
                { vietnamese: "nho", chinese: "葡萄", pinyin: "nho", type: "word" },
                { vietnamese: "dứa", chinese: "菠萝", pinyin: "dua", type: "word" },
                { vietnamese: "xoài", chinese: "芒果", pinyin: "xoai", type: "word" },
                { vietnamese: "sầu riêng", chinese: "榴莲", pinyin: "sau rieng", type: "word" },
                { vietnamese: "chợ", chinese: "市场", pinyin: "cho", type: "word" },
                { vietnamese: "siêu thị", chinese: "超市", pinyin: "sieu thi", type: "phrase" },
                { vietnamese: "cửa hàng", chinese: "商店", pinyin: "cua hang", type: "phrase" },
                { vietnamese: "mua", chinese: "买", pinyin: "mua", type: "word" },
                { vietnamese: "bán", chinese: "卖", pinyin: "ban", type: "word" },
                { vietnamese: "giá", chinese: "价格", pinyin: "gia", type: "word" },
                { vietnamese: "tiền", chinese: "钱", pinyin: "tien", type: "word" },
                { vietnamese: "đắt", chinese: "贵", pinyin: "dat", type: "word" },
                { vietnamese: "rẻ", chinese: "便宜", pinyin: "re", type: "word" },
                { vietnamese: "thanh toán", chinese: "支付", pinyin: "thanh toan", type: "phrase" },
                { vietnamese: "hóa đơn", chinese: "账单", pinyin: "hoa don", type: "phrase" },
                { vietnamese: "khuyến mãi", chinese: "促销", pinyin: "khuyen mai", type: "phrase" },
                { vietnamese: "giảm giá", chinese: "打折", pinyin: "giam gia", type: "phrase" },
                { vietnamese: "miễn phí", chinese: "免费", pinyin: "mien phi", type: "phrase" },
                { vietnamese: "nhà hàng", chinese: "餐厅", pinyin: "nha hang", type: "phrase" },
                { vietnamese: "quán ăn", chinese: "小吃店", pinyin: "quan an", type: "phrase" },
                { vietnamese: "menu", chinese: "菜单", pinyin: "menu", type: "word" },
                { vietnamese: "gọi món", chinese: "点菜", pinyin: "goi mon", type: "phrase" },
                { vietnamese: "ngon", chinese: "好吃", pinyin: "ngon", type: "word" },
                { vietnamese: "dở", chinese: "难吃", pinyin: "do", type: "word" },
                { vietnamese: "ngọt", chinese: "甜", pinyin: "ngot", type: "word" },
                { vietnamese: "mặn", chinese: "咸", pinyin: "man", type: "word" },
                { vietnamese: "chua", chinese: "酸", pinyin: "chua", type: "word" },
                { vietnamese: "cay", chinese: "辣", pinyin: "cay", type: "word" },
                { vietnamese: "đắng", chinese: "苦", pinyin: "dang", type: "word" },
                { vietnamese: "nhạt", chinese: "淡", pinyin: "nhat", type: "word" },
                { vietnamese: "nóng", chinese: "热（温度）", pinyin: "nong", type: "word" },
                { vietnamese: "lạnh", chinese: "冷（温度）", pinyin: "lanh", type: "word" }
            ],
            4: [
                { vietnamese: "xe máy", chinese: "摩托车", pinyin: "xe may", type: "phrase" },
                { vietnamese: "ô tô", chinese: "汽车", pinyin: "o to", type: "word" },
                { vietnamese: "xe buýt", chinese: "公交车", pinyin: "xe buyt", type: "phrase" },
                { vietnamese: "tàu hỏa", chinese: "火车", pinyin: "tau hoa", type: "phrase" },
                { vietnamese: "máy bay", chinese: "飞机", pinyin: "may bay", type: "phrase" },
                { vietnamese: "tàu thủy", chinese: "船", pinyin: "tau thuy", type: "phrase" },
                { vietnamese: "xe đạp", chinese: "自行车", pinyin: "xe dap", type: "phrase" },
                { vietnamese: "taxi", chinese: "出租车", pinyin: "taxi", type: "word" },
                { vietnamese: "ga", chinese: "车站", pinyin: "ga", type: "word" },
                { vietnamese: "sân bay", chinese: "机场", pinyin: "san bay", type: "phrase" },
                { vietnamese: "bến xe", chinese: "汽车站", pinyin: "ben xe", type: "phrase" },
                { vietnamese: "vé", chinese: "票", pinyin: "ve", type: "word" },
                { vietnamese: "hộ chiếu", chinese: "护照", pinyin: "ho chieu", type: "phrase" },
                { vietnamese: "visa", chinese: "签证", pinyin: "visa", type: "word" },
                { vietnamese: "du lịch", chinese: "旅游", pinyin: "du lich", type: "word" },
                { vietnamese: "khách sạn", chinese: "酒店", pinyin: "khach san", type: "phrase" },
                { vietnamese: "phòng", chinese: "房间", pinyin: "phong", type: "word" },
                { vietnamese: "đặt phòng", chinese: "预订房间", pinyin: "dat phong", type: "phrase" },
                { vietnamese: "hướng dẫn viên", chinese: "导游", pinyin: "huong dan vien", type: "phrase" },
                { vietnamese: "bản đồ", chinese: "地图", pinyin: "ban do", type: "phrase" },
                { vietnamese: "đường", chinese: "路", pinyin: "duong", type: "word" },
                { vietnamese: "ngã tư", chinese: "十字路口", pinyin: "nga tu", type: "phrase" },
                { vietnamese: "đèn giao thông", chinese: "交通灯", pinyin: "den giao thong", type: "phrase" },
                { vietnamese: "trái", chinese: "左", pinyin: "trai", type: "word" },
                { vietnamese: "phải", chinese: "右", pinyin: "phai", type: "word" },
                { vietnamese: "thẳng", chinese: "直", pinyin: "thang", type: "word" },
                { vietnamese: "lùi", chinese: "后退", pinyin: "lui", type: "word" },
                { vietnamese: "quẹo", chinese: "转弯", pinyin: "queo", type: "word" },
                { vietnamese: "gần", chinese: "近", pinyin: "gan", type: "word" },
                { vietnamese: "xa", chinese: "远", pinyin: "xa", type: "word" },
                { vietnamese: "bắc", chinese: "北", pinyin: "bac", type: "word" },
                { vietnamese: "nam", chinese: "南", pinyin: "nam", type: "word" },
                { vietnamese: "đông", chinese: "东", pinyin: "dong", type: "word" },
                { vietnamese: "tây", chinese: "西", pinyin: "tay", type: "word" },
                { vietnamese: "trung tâm", chinese: "中心", pinyin: "trung tam", type: "phrase" },
                { vietnamese: "ngoại ô", chinese: "郊区", pinyin: "ngoai o", type: "phrase" },
                { vietnamese: "thành phố", chinese: "城市", pinyin: "thanh pho", type: "phrase" },
                { vietnamese: "nông thôn", chinese: "农村", pinyin: "nong thon", type: "phrase" },
                { vietnamese: "biển", chinese: "海", pinyin: "bien", type: "word" },
                { vietnamese: "núi", chinese: "山", pinyin: "nui", type: "word" },
                { vietnamese: "sông", chinese: "河", pinyin: "song", type: "word" },
                { vietnamese: "hồ", chinese: "湖", pinyin: "ho", type: "word" },
                { vietnamese: "công viên", chinese: "公园", pinyin: "cong vien", type: "phrase" },
                { vietnamese: "di tích", chinese: "古迹", pinyin: "di tich", type: "phrase" },
                { vietnamese: "bảo tàng", chinese: "博物馆", pinyin: "bao tang", type: "phrase" },
                { vietnamese: "chùa", chinese: "寺庙", pinyin: "chua", type: "word" },
                { vietnamese: "nhà thờ", chinese: "教堂", pinyin: "nha tho", type: "phrase" },
                { vietnamese: "đẹp", chinese: "漂亮", pinyin: "dep", type: "word" },
                { vietnamese: "thú vị", chinese: "有趣", pinyin: "thu vi", type: "phrase" },
                { vietnamese: "nguy hiểm", chinese: "危险", pinyin: "nguy hiem", type: "phrase" }
            ]
        };

        // 应用状态
        let currentUnit = 1;
        let currentWords = [];
        let currentIndex = 0;
        let correctCount = 0;
        let totalAnswered = 0;
        let currentQuestion = null;
        let options = [];
        let correctAnswerIndex = -1;

        // DOM元素
        const unitButtons = document.querySelectorAll('.unit-btn');
        const questionText = document.getElementById('question-text');
        const option1 = document.getElementById('option1');
        const option2 = document.getElementById('option2');
        const feedback = document.getElementById('feedback');
        const nextBtn = document.getElementById('next-btn');
        const currentProgress = document.getElementById('current-progress');
        const totalWords = document.getElementById('total-words');
        const accuracyRate = document.getElementById('accuracy-rate');
        const progressBar = document.getElementById('progress-bar');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const finalAccuracy = document.getElementById('final-accuracy');
        const correctCountElement = document.getElementById('correct-count');
        const totalCountElement = document.getElementById('total-count');
        const restartBtn = document.getElementById('restart-btn');

        // 初始化应用
        function initApp() {
            // 设置单元按钮事件
            unitButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const unit = parseInt(button.dataset.unit);
                    if (unit !== currentUnit) {
                        // 更新当前单元
                        unitButtons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                        currentUnit = unit;
                        
                        // 重置学习状态
                        resetLearning();
                    }
                });
            });

            // 设置选项点击事件
            option1.addEventListener('click', () => checkAnswer(0));
            option2.addEventListener('click', () => checkAnswer(1));
            
            // 设置下一题按钮事件
            nextBtn.addEventListener('click', nextQuestion);
            
            // 设置重新开始按钮事件
            restartBtn.addEventListener('click', resetLearning);
            
            // 初始化学习
            resetLearning();
        }

        // 重置学习状态
        function resetLearning() {
            currentWords = [...wordData[currentUnit]];
            shuffleArray(currentWords);
            currentIndex = 0;
            correctCount = 0;
            totalAnswered = 0;
            
            // 更新UI
            totalWords.textContent = currentWords.length;
            updateProgress();
            
            // 显示第一题
            showQuestion();
            
            // 隐藏结果屏幕，显示测验屏幕
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
        }

        // 显示问题
        function showQuestion() {
            if (currentIndex >= currentWords.length) {
                showResults();
                return;
            }
            
            currentQuestion = currentWords[currentIndex];
            
            // 随机决定问题是越南语还是中文
            const isVietnameseQuestion = Math.random() > 0.5;
            
            if (isVietnameseQuestion) {
                questionText.textContent = currentQuestion.vietnamese;
            } else {
                questionText.textContent = currentQuestion.chinese;
            }
            
            // 生成选项
            options = generateOptions(currentQuestion, isVietnameseQuestion);
            
            // 显示选项
            option1.textContent = options[0];
            option2.textContent = options[1];
            
            // 重置选项样式
            option1.className = 'option';
            option2.className = 'option';
            
            // 隐藏反馈和禁用下一题按钮
            feedback.textContent = '';
            feedback.className = 'feedback';
            nextBtn.disabled = true;
        }

        // 生成选项
        function generateOptions(correctWord, isVietnameseQuestion) {
            const options = [];
            
            // 添加正确答案
            if (isVietnameseQuestion) {
                options.push(correctWord.chinese);
            } else {
                options.push(correctWord.vietnamese);
            }
            
            // 添加错误答案
            let wrongOptions = currentWords.filter(word => word !== correctWord);
            shuffleArray(wrongOptions);
            
            if (isVietnameseQuestion) {
                options.push(wrongOptions[0].chinese);
            } else {
                options.push(wrongOptions[0].vietnamese);
            }
            
            // 随机排序选项
            shuffleArray(options);
            
            // 记录正确答案的索引
            if (isVietnameseQuestion) {
                correctAnswerIndex = options.indexOf(correctWord.chinese);
            } else {
                correctAnswerIndex = options.indexOf(correctWord.vietnamese);
            }
            
            return options;
        }

        // 检查答案
        function checkAnswer(selectedIndex) {
            const isCorrect = selectedIndex === correctAnswerIndex;
            
            // 更新样式
            if (isCorrect) {
                if (selectedIndex === 0) {
                    option1.classList.add('correct');
                } else {
                    option2.classList.add('correct');
                }
                
                correctCount++;
                feedback.textContent = "正确!";
                feedback.className = "feedback correct-feedback";
            } else {
                if (selectedIndex === 0) {
                    option1.classList.add('incorrect');
                    option2.classList.add('correct');
                } else {
                    option1.classList.add('correct');
                    option2.classList.add('incorrect');
                }
                
                feedback.textContent = `错误! 正确答案是: ${options[correctAnswerIndex]}`;
                feedback.className = "feedback incorrect-feedback";
            }
            
            totalAnswered++;
            updateProgress();
            
            // 启用下一题按钮
            nextBtn.disabled = false;
        }

        // 下一题
        function nextQuestion() {
            currentIndex++;
            showQuestion();
        }

        // 更新进度
        function updateProgress() {
            currentProgress.textContent = totalAnswered;
            
            const progressPercentage = (totalAnswered / currentWords.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            
            const accuracy = totalAnswered > 0 ? Math.round((correctCount / totalAnswered) * 100) : 0;
            accuracyRate.textContent = `${accuracy}%`;
        }

        // 显示结果
        function showResults() {
            const accuracy = Math.round((correctCount / currentWords.length) * 100);
            
            finalAccuracy.textContent = `${accuracy}%`;
            correctCountElement.textContent = correctCount;
            totalCountElement.textContent = currentWords.length;
            
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
        }

        // 辅助函数：随机打乱数组
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // 启动应用
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>